import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as o}from"react";import{isValidElementType as i}from"react-is";import{Switch,Mention,Form,Checkbox,Radio,Transfer,Pagination}from"antd";function a(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);return e}function f(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function l(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)p(e,r)}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return s(e)}function p(e,r){p=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return p(e,r)}function v(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,i;for(i=0;i<n.length;i++){o=n[i];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function b(e,r){if(e==null)return{};var t=v(e,r);var n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++){n=i[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return m(e)}function y(e,r){if(typeof e!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function h(e){var r=y(e,"string");return typeof r==="symbol"?r:String(r)}var g=1;var k=function e(r){g=r};var O=Switch.name!=="Switch";var P=O?Switch:"Switch";var _=O?Checkbox:"Checkbox";var w=O?Radio:"Radio";var j=O?Mention:"Mention";var C=O?Transfer:"Transfer";var E=O?Pagination:"Pagination";function S(e){if(e){var r=e.type;if(typeof r!=="string"&&i(r)){if(r.formutilType){return r.formutilType}if(O){return r}return r.displayName||r.name}return e.props.type||e.type}}var T=function(o){l(i,o);function i(){a(this,i);return d(this,s(i).apply(this,arguments))}c(i,[{key:"render",value:function o(){var i=this;var a=this.props;var u=a.children,c=a.itemProps,l=a.errorLevel,s=l===void 0?g:l,p=b(a,["children","itemProps","errorLevel"]);var v=t.only(u);var m=S(v);switch(m){case P:case _:case w:p.__TYPE__="checked";break;case E:if(!("$defaultValue"in p)){p.$defaultValue=1}break;case"checked":case"array":case"object":case"number":case"empty":p.__TYPE__=m;break;default:p.__TYPE__="empty";break}return r.createElement(e,Object.assign({},p,{passUtil:"$fieldutil",render:function e(t){var o,u;var l=a.valuePropName,p=l===void 0?"value":l,d=a.changePropName,y=d===void 0?"onChange":d,g=a.focusPropName,k=g===void 0?"onFocus":g,O=a.blurPropName,S=O===void 0?"onBlur":O;var T=t.$fieldutil,$=t[y],V=t[k],x=t[S],N=t[p],Y=b(t,["$fieldutil",y,k,S,p].map(h));var F=T.$invalid,I=T.$dirty,L=T.$touched,R=T.$getFirstError;var U;switch(m){case P:case _:case w:case"checked":var A=a.checked,B=A===void 0?true:A,K=a.unchecked,M=K===void 0?false:K;U={checked:N===B,onChange:function e(r){var t=r&&r.target?r.target.checked:r;$(t?B:M,r)}};break;case j:U={defaultValue:Mention.toContentState(N||""),onChange:function e(r){var t=Mention.toString(r);if(t!==N){$(t)}}};break;case C:U={targetKeys:N,onChange:$};break;case E:U={current:N,onChange:$};break;default:U=(o={onCompositionEnd:function e(r){i.isComposition=false;delete i.compositionValue;$(r)},onCompositionStart:function e(){return i.isComposition=true}},f(o,y,function(e){if(i.isComposition){i.compositionValue=e.target[p];i.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}$.apply(void 0,[e].concat(t))}}),f(o,p,"compositionValue"in i?i.compositionValue:N),o);break}Object.assign(U,(u={},f(u,k,V),f(u,S,x),u));var q;switch(s){case 0:q=F&&I&&L;break;case 1:q=F&&I;break;case 2:q=F;break;default:q=false;break}var z=q?{validateStatus:"error",help:R()}:{};return r.createElement(Form.Item,Object.assign({},Y,c,z),n(v,U))}}))}}]);return i}(o);export{T as FormItem,k as setErrorLevel};
