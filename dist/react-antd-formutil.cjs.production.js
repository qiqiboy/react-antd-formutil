"use strict";Object.defineProperty(exports,"__esModule",{value:true});function e(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=require("react-formutil");var t=require("react");var n=e(t);var o=require("react-is");var i=require("antd");function a(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);return e}function f(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function s(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)p(e,r)}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return l(e)}function p(e,r){p=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return p(e,r)}function v(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,i;for(i=0;i<n.length;i++){o=n[i];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function d(e,r){if(e==null)return{};var t=v(e,r);var n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++){n=i[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function b(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function y(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return b(e)}function m(e,r){if(typeof e!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function h(e){var r=m(e,"string");return typeof r==="symbol"?r:String(r)}var g=1;var k=function e(r){g=r};var O=i.Switch.name!=="Switch";var j=O?i.Switch:"Switch";var P=O?i.Checkbox:"Checkbox";var _=O?i.Radio:"Radio";var w=O?i.Mention:"Mention";var E=O?i.Transfer:"Transfer";var C=O?i.Pagination:"Pagination";function S(e){if(e){var r=e.type;if(typeof r!=="string"&&o.isValidElementType(r)){if(r.formutilType){return r.formutilType}if(O){return r}return r.displayName||r.name}return e.props.type||e.type}}var T=function(e){s(o,e);function o(){a(this,o);return y(this,l(o).apply(this,arguments))}c(o,[{key:"render",value:function e(){var o=this;var a=this.props;var u=a.children,c=a.itemProps,s=a.errorLevel,l=s===void 0?g:s,p=d(a,["children","itemProps","errorLevel"]);var v=t.Children.only(u);var b=S(v);switch(b){case j:case P:case _:p.__TYPE__="checked";break;case C:if(!("$defaultValue"in p)){p.$defaultValue=1}break;case"checked":case"array":case"object":case"number":case"empty":p.__TYPE__=b;break;default:p.__TYPE__="empty";break}return n.createElement(r.EasyField,Object.assign({},p,{passUtil:"$fieldutil",render:function e(r){var u,s;var p=a.valuePropName,y=p===void 0?"value":p,m=a.changePropName,g=m===void 0?"onChange":m,k=a.focusPropName,O=k===void 0?"onFocus":k,S=a.blurPropName,T=S===void 0?"onBlur":S;var $=r.$fieldutil,x=r[g],N=r[O],V=r[T],F=r[y],M=d(r,["$fieldutil",g,O,T,y].map(h));var q=$.$invalid,I=$.$dirty,L=$.$touched,R=$.$focused,Y=$.$getFirstError;var B;switch(b){case j:case P:case _:case"checked":var U=a.checked,A=U===void 0?true:U,K=a.unchecked,z=K===void 0?false:K;B={checked:F===A,onChange:function e(r){var t=r&&r.target?r.target.checked:r;x(t?A:z,r)}};break;case w:B={defaultValue:i.Mention.toContentState(F||""),onChange:function e(r){var t=i.Mention.toString(r);if(t!==F){x(t)}}};break;case E:B={targetKeys:F,onChange:x};break;case C:B={current:F,onChange:x};break;default:B=(u={onCompositionEnd:function e(r){o.isComposition=false;delete o.compositionValue;x(r)},onCompositionStart:function e(){return o.isComposition=true}},f(u,g,function(e){if(o.isComposition){o.compositionValue=e.target[y];o.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}x.apply(void 0,[e].concat(t))}}),f(u,y,"compositionValue"in o?o.compositionValue:F),u);break}Object.assign(B,(s={},f(s,O,N),f(s,T,V),s));var D;switch(l){case 0:D=q&&I&&L;break;case 1:D=q&&I;break;case 2:D=q;break;default:D=false;break}M.className=[M.className,D&&"has-error",q&&"is-invalid",I&&"is-dirty",L&&"is-touched",R&&"is-focused"].filter(Boolean).join(" ");var G=D?{validateStatus:"error",help:Y()}:{};return n.createElement(i.Form.Item,Object.assign({},M,c,G),t.cloneElement(v,B))}}))}}]);return o}(t.Component);Object.keys(r).forEach(function(e){if(e!=="default")Object.defineProperty(exports,e,{enumerable:true,get:function(){return r[e]}})});exports.FormItem=T;exports.setErrorLevel=k;
